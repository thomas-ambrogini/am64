<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>AM64x MCU+ SDK: Running SMP FreeRTOS application on A53</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AM64x MCU+ SDK
   &#160;<span id="projectnumber">08.05.00</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('SMP_FREERTOS_GUIDE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Running SMP FreeRTOS application on A53 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md411">Introduction</a></li>
<li class="level1"><a href="#autotoc_md412">Running SMP application using CCS</a><ul><li class="level2"><a href="#autotoc_md413">Loading and running a .out file for an SMP application</a></li>
<li class="level2"><a href="#autotoc_md414">Building and running an SMP application using CCS</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md415">Dhrystone benchmark values for SMP FreeRTOS on A53</a></li>
<li class="level1"><a href="#autotoc_md416">See also</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_developer_guides_smp_freertos"></a></p>
<h1><a class="anchor" id="autotoc_md411"></a>
Introduction</h1>
<dl class="section note"><dt>Note</dt><dd>Only example application that supports SMP mode can be run on both A53 cores in SMP mode. </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>All SPI interrupts are routed to A53 Core 0.</dd></dl>
<p>SMP FreeRTOS kernel support is added in the DPL layer for A53 core. This makes use of both the A53 cores for running applications by making using of the FreeRTOS SMP kernel for scheduling tasks on both cores.</p>
<p>SMP application uses SGI interrupt interrupt number 0 for communication between A53 cores. So care must be taken not to use this interrupt in user applications.</p>
<p>SMP applications can be loaded via SBL as well as CCS. A53 cores must be run as sync group in CCS when running SMP applications.</p>
<h1><a class="anchor" id="autotoc_md412"></a>
Running SMP application using CCS</h1>
<dl class="section note"><dt>Note</dt><dd>Only example application that supports SMP mode can be run on both A53 cores in SMP mode.</dd></dl>
<h2><a class="anchor" id="autotoc_md413"></a>
Loading and running a .out file for an SMP application</h2>
<p>When runnig SMP application using CCS, the cores needs to be run as sync group.</p>
<p>A sync group can be created as follows. This ensures the same binary is executed on both cores from the same entry point.</p>
<p> <style>div.image img[src="a53_sync_group_create.png"]{width:60%}</style> </p><div class="image">
<img src="a53_sync_group_create.png" alt=""/>
<div class="caption">
Sync group creation in CCS</div></div>
<h2><a class="anchor" id="autotoc_md414"></a>
Building and running an SMP application using CCS</h2>
<p>An SMP example for A53 can be imported and build just as a single core A53 application. But both cores must be selected and sync group must be created when launching the debug session.</p>
<p> <style>div.image img[src="ccs_smp_debug_session_launch.png"]{width:50%}</style> </p><div class="image">
<img src="ccs_smp_debug_session_launch.png" alt=""/>
<div class="caption">
Launching SMP debug session in CCS</div></div>
<h1><a class="anchor" id="autotoc_md415"></a>
Dhrystone benchmark values for SMP FreeRTOS on A53</h1>
<dl class="section note"><dt>Note</dt><dd>The values obtained is from example - <a class="el" href="EXAMPLES_KERNEL_FREERTOS_DHRYSTONE_BENCHMARK.html">Dhrystone benchmarking demo</a> when build in release mode</dd></dl>
<p>The dhrystone values can be used to compare the performance between single core FreeRTOS on A53 and SMP FreeRTOS on A53.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">No of Threads  </th><th class="markdownTableHeadNone">No of Iterations  </th><th class="markdownTableHeadNone">Dhrystone per second for Single Core FreeRTOS on A53  </th><th class="markdownTableHeadNone">Dhrystone per second for SMP FreeRTOS on A53   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">30000000  </td><td class="markdownTableBodyNone">1266  </td><td class="markdownTableBodyNone">1268   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">30000000  </td><td class="markdownTableBodyNone">577  </td><td class="markdownTableBodyNone">1155   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5  </td><td class="markdownTableBodyNone">30000000  </td><td class="markdownTableBodyNone">164  </td><td class="markdownTableBodyNone">274   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">10  </td><td class="markdownTableBodyNone">30000000  </td><td class="markdownTableBodyNone">26  </td><td class="markdownTableBodyNone">53   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md416"></a>
See also</h1>
<p>For more details on debugging an SMP application using CCS, see <a href="https://software-dl.ti.com/ccs/esd/documents/ccs_smp-debug.html">here</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
